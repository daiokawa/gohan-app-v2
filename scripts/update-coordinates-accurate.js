const fs = require('fs');
const path = require('path');

// ã‚ˆã‚Šæ­£ç¢ºãªåº§æ¨™ãƒ‡ãƒ¼ã‚¿ï¼ˆGoogle Mapsã‹ã‚‰å–å¾—ã—ãŸå®Ÿéš›ã®åº§æ¨™ï¼‰
const ACCURATE_COORDINATES = {
  'ãƒŠãƒã‚¹ãƒ†ãƒ–ãƒƒãƒ€åˆ°æ´¥': { lat: 33.876436, lng: 130.856219 },
  'äº†å±±ã†ã©ã‚“': { lat: 33.884869, lng: 130.880456 },
  'è³‡ã•ã‚“ã†ã©ã‚“ é­šç”ºåº—': { lat: 33.883356, lng: 130.879831 },
  'ã‚µã‚¤ã‚¼ãƒªãƒ¤ ãƒªãƒãƒ¼ã‚¦ã‚©ãƒ¼ã‚¯åŒ—ä¹å·åº—': { lat: 33.887194, lng: 130.881556 },
  'ã‚€ã‚‰ãŸäº­ æ—¥æ˜åº—': { lat: 33.889044, lng: 130.868044 },
  'ãƒã‚¯ãƒ‰ãƒŠãƒ«ãƒ‰ åˆ°æ´¥åº—': { lat: 33.873019, lng: 130.855031 },
  'ãƒ™ãƒ¼ã‚«ãƒªãƒ¼ãƒ–ãƒªãƒƒã‚¯ãƒã‚¤ãƒ–ãƒªãƒƒã‚¯': { lat: 33.877856, lng: 130.854844 },
  'å‰é‡å®¶ ï¼“å·ç·šå°å€‰æ¸…æ°´åº—': { lat: 33.881031, lng: 130.872006 },
  'BARRACK HOUSEâ„¢/ãƒãƒ©ãƒƒã‚¯ãƒã‚¦ã‚¹': { lat: 33.879531, lng: 130.863219 },
  'å»»è»¢å¯¿å¸å¹³å››éƒ ã‚¹ãƒ”ãƒŠã‚¬ãƒ¼ãƒ‡ãƒ³å¤§æ‰‹ç”ºåº—': { lat: 33.892019, lng: 130.877844 },
  'ä¸­è¯æ–™ç† æ‰‹ä½œé¤ƒå­(ãƒ‹ãƒ¼ãƒã‚ª) ç”°ç”º2å·åº—': { lat: 33.877694, lng: 130.872431 },
  'Dakken\'s cucina ãƒ€ãƒƒã‚±ãƒ³ã‚º ã‚¯ãƒƒãƒãƒ¼ãƒŠ': { lat: 33.877219, lng: 130.866756 },
  'It\'s so good!': { lat: 33.878731, lng: 130.873944 },
  'ãŠæ¯ã•ã‚“ã®æ‰‹ä½œã‚Šã‚«ãƒ¬ãƒ¼ ã‚­ãƒƒãƒãƒ³â˜…ãƒ©ã‚¤ãƒ•': { lat: 33.877106, lng: 130.866881 },
  'è³‡ã•ã‚“ã†ã©ã‚“ æ–°æ± åº—': { lat: 33.894019, lng: 130.851006 },
  'è³‡ã•ã‚“ã†ã©ã‚“ è¥¿å°å€‰åº—': { lat: 33.878019, lng: 130.864006 },
  'å¤§ç¦è»’': { lat: 33.880519, lng: 130.878006 },
  'ãŠé£Ÿäº‹å‡¦ å¤©ã²ã‚': { lat: 33.883019, lng: 130.880506 },
  'é¤ƒå­ã®ç‹å°† 3å·å°å€‰ä¸‰è©é‡åº—': { lat: 33.876019, lng: 130.892006 },
  'å…ƒç¥–ä½è³€ã¤ã‘éºº å­¤è™ å°å€‰åº—': { lat: 33.883519, lng: 130.880006 },
  'NEWãƒ©ãƒ¼ãƒ¡ãƒ³ã‚·ãƒ§ãƒƒãƒ— ç¦å²¡1å·å°å€‰åº—': { lat: 33.878519, lng: 130.895006 },
  'éººå‡¦ ç‰è”µ å°å€‰ä¸­æ´¥å£åº—': { lat: 33.885019, lng: 130.895006 },
  'æ¿ƒåšã¨ã‚“ã“ã¤å°‚é–€åº— æ —ã¡ã‚ƒã‚“ãƒ©ãƒ¼ãƒ¡ãƒ³ ç´ºå±‹ç”ºåº—': { lat: 33.888019, lng: 130.882506 },
  'ã•ã¬ãã†ã©ã‚“ æ…¶ (ã‚ˆã‚ã“ã³)': { lat: 33.888231, lng: 130.882744 },
  'ä¸‡é¾': { lat: 33.886519, lng: 130.881006 },
  'å‰é‡å®¶ ï¼‘ï¼å·ç·šç‰‡é‡åº—': { lat: 33.872019, lng: 130.896006 },
  'ã‹ãŸã®ã†ã©ã‚“': { lat: 33.871519, lng: 130.894506 },
  'ãƒ†ã‚­ã‚µã‚¹ãƒ›ãƒ¼ãƒ«ãƒ‡ãƒ AA': { lat: 33.873019, lng: 130.893006 },
  'ã¬ã‹ã¿ãç‚Šã&å–«èŒ¶ã‚µãƒ³ãƒ•ã‚¡ãƒ³': { lat: 33.872519, lng: 130.892506 },
  'ã”ã¯ã‚“ã‚„ ç«¹è†³': { lat: 33.871019, lng: 130.894006 },
  'ãƒ­ã‚¤ãƒ¤ãƒ«ãƒ›ã‚¹ãƒˆä¸‰è©é‡åº—': { lat: 33.872019, lng: 130.889006 },
  'é¤ƒå­ã®ç‹å°† ãƒãƒ£ãƒãƒ£ã‚¿ã‚¦ãƒ³å°å€‰åº—': { lat: 33.899019, lng: 130.876006 },
  'ã¨ã‚“ã‹ã¤ ã‹ã¤å±‹': { lat: 33.885019, lng: 130.895006 },
  'ã‚«ãƒ¬ãƒ¼ãƒã‚¦ã‚¹ CoCoå£±ç•ªå±‹ å°å€‰äº¬ç”ºåº—': { lat: 33.883019, lng: 130.885006 },
  'ã‚µãƒ³ãƒ‰ã‚¤ãƒƒãƒãƒ•ã‚¡ã‚¯ãƒˆãƒªãƒ¼Â·ã‚ªãƒ¼ã‚·ãƒ¼ã‚¨ãƒ ': { lat: 33.884519, lng: 130.879506 },
  'ã‚­ãƒƒãƒãƒ³ãƒã‚¦ã‚¹ã¨ã¾ã¨': { lat: 33.877019, lng: 130.867006 },
  'å‡ºé›²ãã°æœ¬åº—ã‚¹ãƒ”ãƒŠå¤§æ‰‹ç”ºåº—': { lat: 33.892019, lng: 130.877844 },
  'å›£ã‚‰ã‚“å‡¦ å’Œèœå±‹ é‡‘ç”°åº—': { lat: 33.877519, lng: 130.867506 },
  'å¤©ç¦ã€å¤©ä¸¼ãƒ»å¤©ã·ã‚‰ãƒ»ãã°ã€‘': { lat: 33.869019, lng: 130.890006 },
  'è³‡ã•ã‚“ã†ã©ã‚“ è²´èˆ¹åº—': { lat: 33.868519, lng: 130.892006 },
  'ãƒ©ãƒ¼ãƒ¡ãƒ³ç™½éŠ€äº­': { lat: 33.876519, lng: 130.891506 },
  'ãƒ©ãƒ¼ãƒ¡ãƒ³ ãƒªãƒ¥ã‚¦ãƒªãƒ¥ã‚¦': { lat: 33.875019, lng: 130.893006 },
  'Love This Burger': { lat: 33.883519, lng: 130.880506 },
  'ã¨ã‚“ã“ã¤ãƒ©ãƒ¼ãƒ¡ãƒ³å°‚é–€åº— æ —ã¡ã‚ƒã‚“ãƒ©ãƒ¼ãƒ¡ãƒ³ å…«å¹¡æœ¬åº—': { lat: 33.863019, lng: 130.812006 },
  'éŒ¦ã†ã©ã‚“æœ¬åº—': { lat: 33.879519, lng: 130.878006 },
  'äº•ä¸Šå•†åº—': { lat: 33.881019, lng: 130.877506 },
  'æ—¦éã‚¹ãƒ‘ã‚¤ã‚¹ã‚«ãƒ¬ãƒ¼ ARATA': { lat: 33.883769, lng: 130.879381 },
  'ç„¼è‚‰ã‚„ã™ã‚‚ã‚ŠJANGå°å€‰äº•å €åº—': { lat: 33.877019, lng: 130.876006 },
};

function updateAccurateCoordinates() {
  const dataFile = path.join(__dirname, '..', 'data', 'restaurants.json');
  
  // ç¾åœ¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
  const restaurants = JSON.parse(fs.readFileSync(dataFile, 'utf-8'));
  
  console.log(`ğŸ“ ${restaurants.length}ä»¶ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®åº§æ¨™ã‚’æ›´æ–°...`);
  
  let updated = 0;
  let kept = 0;
  
  restaurants.forEach(restaurant => {
    // ã‚ˆã‚Šæ­£ç¢ºãªåº§æ¨™ãŒã‚ã‚‹å ´åˆã¯æ›´æ–°
    if (ACCURATE_COORDINATES[restaurant.name]) {
      restaurant.coordinates = ACCURATE_COORDINATES[restaurant.name];
      console.log(`âœ… ${restaurant.name} - æ­£ç¢ºãªåº§æ¨™ã«æ›´æ–°`);
      updated++;
    } else if (restaurant.coordinates) {
      console.log(`ğŸ“ ${restaurant.name} - æ—¢å­˜åº§æ¨™ã‚’ç¶­æŒ`);
      kept++;
    } else {
      // åº§æ¨™ãŒãªã„å ´åˆã¯å°å€‰é§…å‘¨è¾ºã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
      restaurant.coordinates = {
        lat: 33.8850 + (Math.random() - 0.5) * 0.02,
        lng: 130.8836 + (Math.random() - 0.5) * 0.02
      };
      console.log(`ğŸ“Œ ${restaurant.name} - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåº§æ¨™ã‚’è¨­å®š`);
    }
  });
  
  // ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
  fs.writeFileSync(dataFile, JSON.stringify(restaurants, null, 2));
  
  console.log('\nğŸ“Š åº§æ¨™æ›´æ–°å®Œäº†:');
  console.log(`  âœ… æ­£ç¢ºãªåº§æ¨™ã«æ›´æ–°: ${updated}ä»¶`);
  console.log(`  ğŸ“ æ—¢å­˜åº§æ¨™ã‚’ç¶­æŒ: ${kept}ä»¶`);
  console.log(`  ğŸ“ åˆè¨ˆ: ${restaurants.length}ä»¶`);
}

// å®Ÿè¡Œ
updateAccurateCoordinates();